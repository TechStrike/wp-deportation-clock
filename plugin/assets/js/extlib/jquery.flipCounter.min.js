(function(e){e.fn.flipCounter=function(t){function o(){var e=n.data("flipCounter");if(typeof e=="undefined")return false;return true}function u(e){var t=n.data("flipCounter");var r=t[e];if(typeof r!=="undefined"){return r}return false}function a(e,t){var r=n.data("flipCounter");r[e]=t;n.data("flipCounter",r)}function f(){if(n.children('[name="'+u("counterFieldName")+'"]').length<1){n.append('<input type="hidden" name="'+u("counterFieldName")+'" value="'+u("number")+'" />')}var t=h();var r=v().length;if(r>t){for(i=0;i<r-t;i++){var s=e('<span class="'+u("digitClass")+'" style="'+m("0")+'" />');n.prepend(s)}}else if(r<t){for(i=0;i<t-r;i++){n.children("."+u("digitClass")).first().remove()}}n.find("."+u("digitClass")).each(function(){if(0==e(this).find("span").length){e(this).append('<span style="visibility:hidden">0</span>')}})}function l(){f();var t=v();var n=c();var r=0;e.each(n,function(n,i){digit=t.toString().charAt(r);e(this).attr("style",m(digit));e(this).find("span").text(digit.replace(" ","Â ").toString());r++});d()}function c(){return n.children("."+u("digitClass"))}function h(){return c().length}function p(){var e=parseFloat(n.children('[name="'+u("counterFieldName")+'"]').val());if(e==e==false)return false;return e}function d(){n.children('[name="'+u("counterFieldName")+'"]').val(u("number"))}function v(){var t=u("number");if(typeof t!=="number"){e.error("Attempting to render non-numeric value.");return"0"}var n="";if(u("formatNumberOptions")){if(e.formatNumber){n=e.formatNumber(t,u("formatNumberOptions"))}else{e.error("The numberformatter jQuery plugin is not loaded. This plugin is required to use the formatNumberOptions setting.")}}else{if(t>=0){var r=u("numIntegralDigits");var i=r-t.toFixed().toString().length;for(var s=0;s<i;s++){n+="0"}n+=t.toFixed(u("numFractionalDigits"))}else{n="-"+Math.abs(t.toFixed(u("numFractionalDigits")))}}return n}function m(e){var t="height:"+u("digitHeight")+"px; width:"+u("digitWidth")+"px; display:inline-block; background-image:url('"+u("imagePath")+"'); background-repeat:no-repeat; ";var n=new Array;n["1"]=u("digitWidth")*0;n["2"]=u("digitWidth")*-1;n["3"]=u("digitWidth")*-2;n["4"]=u("digitWidth")*-3;n["5"]=u("digitWidth")*-4;n["6"]=u("digitWidth")*-5;n["7"]=u("digitWidth")*-6;n["8"]=u("digitWidth")*-7;n["9"]=u("digitWidth")*-8;n["0"]=u("digitWidth")*-9;n["."]=u("digitWidth")*-10;n["-"]=u("digitWidth")*-11;n[","]=u("digitWidth")*-12;n[" "]=u("digitWidth")*-13;if(e in n){return t+"background-position: "+n[e]+"px 0px;"}return t}function g(t){if(true==u("animating"))b();if(typeof t!=="undefined"){t=e.extend(n.data("flipCounter"),t);n.data("flipCounter",t)}else{t=n.data("flipCounter")}if(false==u("start_time")){a("start_time",(new Date).getTime())}if(false==u("time")){a("time",0)}if(false==u("elapsed")){a("elapsed","0.0")}if(false==u("start_number")){a("start_number",u("number"));if(false==u("start_number")){a("start_number",0)}}y();var r=u("onAnimationStarted");if(typeof r=="function")r.call(n,n)}function y(){function c(){t+=10;r=Math.floor(t/10)/10;if(Math.round(r)==r){r+=".0"}a("elapsed",r);var u=(new Date).getTime()-e-t;var h=0;if(typeof f=="function"){h=f.apply(n,[false,t,i,s,o])}else{h=S(false,t,i,s,o)}a("number",h);a("time",t);l();if(t<o){a("interval",window.setTimeout(c,10-u))}else{b()}}var e=u("start_time");var t=u("time");var r=u("elapsed");var i=u("start_number");var s=u("end_number")-u("start_number");if(s==0)return false;var o=u("duration");var f=u("easing");a("animating",true);window.setTimeout(c,10)}function b(){if(false==u("animating"))return false;clearTimeout(u("interval"));a("start_time",false);a("start_number",false);a("end_number",false);a("time",0);a("animating",false);a("paused",false);var e=u("onAnimationStopped");if(typeof e=="function")e.call(n,n)}function w(){if(false==u("animating")||true==u("paused"))return false;clearTimeout(u("interval"));a("paused",true);var e=u("onAnimationPaused");if(typeof e=="function")e.call(n,n)}function E(){if(false==u("animating")||false==u("paused"))return false;a("paused",false);y();var e=u("onAnimationResumed");if(typeof e=="function")e.call(n,n)}function S(e,t,n,r,i){return t/i*r+n}var n=false;var r={number:0,numIntegralDigits:1,numFractionalDigits:0,digitClass:"counter-digit",counterFieldName:"counter-value",digitHeight:40,digitWidth:30,imagePath:"img/flipCounter-medium.png",easing:false,duration:1e4,onAnimationStarted:false,onAnimationStopped:false,onAnimationPaused:false,onAnimationResumed:false,formatNumberOptions:false};var s={init:function(t){return this.each(function(){n=e(this);var i=e.extend(r,t);var s=n.data("flipCounter");t=e.extend(s,i);n.data("flipCounter",t);if(t.number===false||t.number==0){p()!==false?t.number=p():t.number=0;a("number",t.number)}a("animating",false);a("start_time",false);n.bind("startAnimation",function(e,t){g(t)});n.bind("pauseAnimation",function(e){w()});n.bind("resumeAnimation",function(e){E()});n.bind("stopAnimation",function(e){b()});n.htmlClean();l()})},renderCounter:function(t){return this.each(function(){n=e(this);if(!o())e(this).flipCounter();a("number",t);l()})},setNumber:function(t){return this.each(function(){n=e(this);if(!o())e(this).flipCounter();a("number",t);l()})},getNumber:function(){var t=false;this.each(t=function(){n=e(this);if(!o())e(this).flipCounter();t=u("number");return t});return t},startAnimation:function(t){return this.each(function(){n=e(this);if(!o())e(this).flipCounter();n.trigger("startAnimation",t)})},stopAnimation:function(){return this.each(function(){n=e(this);if(!o())e(this).flipCounter();n.trigger("stopAnimation")})},pauseAnimation:function(){return this.each(function(){n=e(this);if(!o())e(this).flipCounter();n.trigger("pauseAnimation")})},resumeAnimation:function(){return this.each(function(){n=e(this);if(!o())e(this).flipCounter();n.trigger("resumeAnimation")})}};if(s[t]){return s[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return s.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.flipCounter")}}})(jQuery);jQuery.fn.htmlClean=function(){this.contents().filter(function(){if(this.nodeType!=3){$(this).htmlClean();return false}else{return!/\S/.test(this.nodeValue)}}).remove()}